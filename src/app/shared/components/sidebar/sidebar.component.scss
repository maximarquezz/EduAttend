@use "../../styles/layout.scss" as *;
@use "../../styles/breakpoints.scss" as *;
@use "sass:map";

mat-sidenav-container {
  width: 100dvw;
  height: 100dvh;
  position: fixed;
  left: 0;
  top: 0;
  z-index: 100;
  background: rgba(0, 0, 0, 0.32);

  mat-sidenav {
    display: none;
  }

  mat-sidenav-content {
    width: 360px;
    height: 100%;
    background: var(--mat-sys-surface);
    display: flex;
    flex-direction: column;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);

    header {
      padding: 24px 16px;
      display: flex;
      align-items: center;
      justify-content: center;
      border-bottom: 1px solid var(--mat-sys-outline-variant);
      background: var(--mat-sys-primary-container);
      position: relative;

      &::after {
        content: "";
        position: absolute;
        bottom: 0;
        left: 50%;
        transform: translateX(-50%);
        width: 60%;
        height: 2px;
        background: var(--mat-sys-primary);
        opacity: 0.3;
      }

      img {
        max-width: 140px;
        height: auto;
        filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.1));
      }
    }

    nav {
      flex: 1;
      overflow-y: auto;
      padding: 8px 0;

      > div {
        padding: 16px;
        display: flex;
        align-items: center;
        justify-content: space-between;
        background: var(--mat-sys-surface-container-low);
        margin: 0 12px 12px 12px;
        border-radius: 16px;

        mat-card {
          flex: 1;
          background: transparent;
          box-shadow: none;
          padding: 0;

          mat-card-header {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 0;

            img[mat-card-avatar] {
              width: 40px;
              height: 40px;
              border-radius: 50%;
              margin: 0;
              border: 2px solid var(--mat-sys-primary);
              box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            }

            .mat-mdc-card-header-text {
              flex: 1;
              margin: 0;
            }

            mat-card-title {
              font: var(--mat-sys-title-medium);
              font-weight: 600;
              color: var(--mat-sys-on-surface);
              margin: 0;
            }

            mat-card-subtitle {
              font: var(--mat-sys-body-medium);
              color: var(--mat-sys-on-surface-variant);
              margin: 0;
              display: inline-flex;
              align-items: center;
              gap: 4px;

              &::before {
                content: "";
                width: 6px;
                height: 6px;
                border-radius: 50%;
                background: var(--mat-sys-primary);
                display: inline-block;
              }
            }
          }
        }

        mat-icon {
          cursor: pointer;
          color: var(--mat-sys-on-surface-variant);
          transition: all 0.2s;
          padding: 8px;
          border-radius: 50%;

          &:hover {
            color: var(--mat-sys-on-surface);
            background: var(--mat-sys-surface-container-highest);
          }
        }
      }

      mat-divider {
        border-color: var(--mat-sys-outline-variant);
        opacity: 0.5;
        margin: 8px 16px;
      }

      mat-list {
        padding: 8px;

        div[mat-subheader] {
          font: var(--mat-sys-title-small);
          color: var(--mat-sys-primary);
          padding: 12px 16px;
          margin: 0;
          height: auto;
        }

        mat-list-item {
          border-radius: 16px;
          margin: 0 0 4px 0;
          min-height: 56px;
          cursor: pointer;
          transition: background 0.2s;
          padding: 0 16px 0 12px;

          span[matListItemTitle] {
            display: flex;
            align-items: center;
            padding: 0;

            mat-icon {
              margin-right: 12px;
              color: var(--mat-sys-on-surface-variant);
              transition: color 0.2s;
            }

            a {
              font: var(--mat-sys-label-large);
              color: var(--mat-sys-on-surface);
              text-decoration: none;
              transition: color 0.2s;
            }
          }

          &:hover {
            background: var(--mat-sys-primary-container);
          }

          &.active-link {
            background: var(--mat-sys-tertiary-container);

            span[matListItemTitle] {
              mat-icon,
              a {
                color: var(--mat-sys-on-secondary-container);
              }
            }
          }
        }

        mat-divider {
          margin: 12px 12px;
          border-color: var(--mat-sys-outline-variant);
        }

        mat-list-item:last-of-type {
          margin-top: 4px;

          span[matListItemTitle] {
            mat-icon,
            a {
              color: var(--mat-sys-error);
            }
          }

          &:hover {
            background: var(--mat-sys-error-container);

            span[matListItemTitle] {
              mat-icon,
              a {
                color: var(--mat-sys-on-error-container);
              }
            }
          }
        }
      }
    }
  }
}

@media (min-width: map.get($width-breakpoints, md)) {
  mat-sidenav-container {
    position: relative;
    display: flex;
    background: transparent;
    width: 280px;
    height: 100%;
    box-shadow: none;

    mat-sidenav-content {
      width: 100%;
      border-right: 1px solid var(--mat-sys-outline-variant);
      box-shadow: none;

      header {
        border-bottom: none;
        background: var(--mat-sys-on-container);

        &::after {
          display: none;
        }
      }

      nav > div {
        mat-icon {
          display: none;
        }
      }
    }
  }
}
