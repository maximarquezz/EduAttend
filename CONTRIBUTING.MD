## 1ï¸âƒ£ Orden del cÃ³digo â€“ versiÃ³n **mÃ¡s afilada**

### ğŸ”¹ A) Separar _estado derivado_ del _estado real_

```ts
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ DEPENDENCIAS (inject / ctor)    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ INPUTS / OUTPUTS                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ STATE (estado real mutable)     â”‚
â”‚ - tableData                     â”‚
â”‚ - role                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ DERIVED STATE (getters)         â”‚
â”‚ - attendanceIcon                â”‚
â”‚ - showAttendance                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ LIFECYCLE HOOKS                 â”‚
â”‚ - ngOnInit                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ PUBLIC METHODS (UI actions)     â”‚
â”‚ - openModal                     â”‚
â”‚ - onDegreeChange                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ PRIVATE ORCHESTRATION           â”‚
â”‚ - loadAttendances               â”‚
â”‚ - initUserRole                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ PURE HELPERS (sin efectos)      â”‚
â”‚ - mapPercentage                 â”‚
â”‚ - ensureArray                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

ğŸ‘‰ Esto evita mezclar:

- Estado que **vive**
- Estado que **se calcula**

---

## 2ï¸âƒ£ Checklist mejorado (mÃ¡s preciso)

Tu lista estÃ¡ bien, pero la mejoramos para que sea **accionable**, no solo descriptiva.

### ğŸš¨ SeÃ±ales de alerta **FUERTES** (divide sÃ­ o sÃ­)

1. âŒ La funciÃ³n **decide y ejecuta**

   > â€œSi pasa esto hago X y ademÃ¡s actualizo Yâ€

2. âŒ La funciÃ³n toca **mÃ¡s de un concepto**

   - HTTP + UI
   - UI + reglas de negocio
   - Datos + permisos

3. âŒ La funciÃ³n **no puede testearse sin Angular**

4. âŒ La funciÃ³n **necesita un comentario para entenderse**

---

### âš ï¸ SeÃ±ales de alerta **MEDIAS** (probable refactor)

5. âŒ MÃ¡s de **1 subscribe** en el mismo mÃ©todo
6. âŒ Usa `this.` mÃ¡s de **5 veces**
7. âŒ Tiene `if/else` + `switch` mezclados
8. âŒ Depende de variables que no recibe por parÃ¡metro

---

### ğŸŸ¢ SeÃ±ales de que estÃ¡ bien

9. âœ… El nombre describe _quÃ©_, no _cÃ³mo_
10. âœ… PodrÃ­as moverla a un service sin cambiar nada
11. âœ… Devuelve un valor **o** produce un efecto, no ambos
12. âœ… La puedes leer sin scrollear

---

## 3ï¸âƒ£ Regla de oro para componentes Angular

ğŸ‘‰ **Un componente NO debe:**

- Calcular reglas de negocio
- Tomar decisiones complejas
- Interpretar roles

ğŸ‘‰ **Un componente SÃ debe:**

- Pedir datos
- Exponer estado
- Reaccionar a eventos
- Traducir estado â†’ UI

Si dudas, pregÃºntate:

> â€œÂ¿Esto podrÃ­a vivir en un service y seguir teniendo sentido?â€

Si la respuesta es sÃ­ â†’ **no es UI**

---

## 4ï¸âƒ£ Regla rÃ¡pida de nombres (muy Ãºtil)

Si al nombrar una funciÃ³n usas:

| Palabra                       | Significado  |
| ----------------------------- | ------------ |
| `load`, `fetch`               | OrquestaciÃ³n |
| `calculate`, `resolve`, `map` | LÃ³gica pura  |
| `handle`, `on`                | Evento       |
| `init`, `setup`               | Lifecycle    |
| `open`, `close`, `toggle`     | UI           |

Si mezclÃ¡s categorÃ­as â†’ **mal olor**

---

## 5ï¸âƒ£ Mini-checklist diario (mental)

Antes de cerrar un componente, preguntate:

- â“ Â¿PodrÃ­a alguien nuevo entender esto en 5 minutos?
- â“ Â¿Hay lÃ³gica que no depende del HTML?
- â“ Â¿Estoy calculando algo que podrÃ­a venir listo?
- â“ Â¿Estoy usando `get` solo para derivar estado?

Si respondÃ©s â€œsÃ­â€ a las malas â†’ refactor.

---
